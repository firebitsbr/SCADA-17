<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <title>ECharts</title>
</head>
<body>
<!-- 为ECharts准备一个具备大小（宽高）的Dom -->
<div id="main" style="height:400px"></div>
<!-- ECharts单文件引入 -->
<script src="../pages/jslib/js/echarts.min.js"></script>
<script src="../pages/jslib/js/jquery-1.11.2.js"></script>
<script type="text/javascript">
    var date7=GetDateStr(-7);
    var date6=GetDateStr(-6);
    var date5=GetDateStr(-5);
    var date4=GetDateStr(-4);
    var date3=GetDateStr(-3);
    var date2=GetDateStr(-2);
    var date1=GetDateStr(-1);
    var dates=[date7,date6,date5,date4,date3,date2,date1];

    var myChart = echarts.init(document.getElementById('main'));
    myChart.setOption({
        tooltip: {
            trigger: 'axis',
            show: true
        },
        toolbox: {
            feature: {
                dataView: {show: true, readOnly: false},
                magicType: {show: true, type: ['line', 'bar']},
                restore: {show: true},
                saveAsImage: {show: true}
            }
        },
        legend: {
            data:['最近一周加氢量统计']
        },
        xAxis : [{
            type : 'category',
            data : dates
        }],
        yAxis : [{
            type : 'value',
            axisLabel: {
                formatter: '{value} L'
            },
        }],
        series : [{
            "name":"加氢量",
            "type":"bar",
            "data":[]
        }]
    });

    $.ajax({
        url:'../json/data.json',
        type:'POST',
        'success':function(data){
            console.log(data);
            console.log(myChart);
            myChart.setOption({
                series: [{
                    // 根据名字对应到相应的系列
                    name: '加氢量',
                    data: data.data
                }]
            });
        },
        'error':{}
    })



    function GetDateStr(AddDayCount){
        var dd = new Date();
        dd.setDate(dd.getDate()+AddDayCount);//获取AddDayCount天后的日期
        var y = dd.getFullYear();
        var m = (dd.getMonth()+1)<10?"0"+(dd.getMonth()+1):(dd.getMonth()+1);//获取当前月份的日期，不足10补0
        var d = dd.getDate()<10?"0"+dd.getDate():dd.getDate(); //获取当前几号，不足10补0
        return y+"-"+m+"-"+d;
    }
</script>
</body>